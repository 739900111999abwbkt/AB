<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>الغرفة الصوتية</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="room.css">
</head>
<body>
  <div id="stayTimer" style="position:fixed;top:20px;right:20px;background:#fff;padding:10px 15px;border-radius:10px;border:1px solid #ccc;font-weight:bold;z-index:999;">
    ⏳ مدة التواجد: <span id="timer">00:00</span>
  </div>
  <div id="entryLog" style="position:fixed;left:20px;bottom:20px;width:250px;max-height:200px;overflow-y:auto;background:#f8f9fa;border:1px solid #ccc;padding:10px;border-radius:10px;font-size:14px;z-index:999;">
    <strong>📜 سجل الدخول:</strong>
    <ul id="logList" style="list-style:none;padding:0;margin:0;margin-bottom:10px;"></ul>
    <strong>🚪 سجل الخروج:</strong>
    <ul id="exitList" style="list-style:none;padding:0;margin:0;"></ul>
  </div>
  <div id="pinnedMessage" style="position:fixed;top:60px;left:50%;transform:translateX(-50%);background:#fff3cd;color:#856404;padding:10px 20px;border-radius:10px;border:1px solid #ffeeba;z-index:999;display:none;font-weight:bold;"></div>
  <button onclick="muteAllUsers()" style="position:fixed;bottom:70px;right:20px;z-index:999;padding:10px 20px;border:none;border-radius:8px;background:#dc3545;color:white;font-weight:bold;">
  🔇 كتم الجميع
  </button>
  <button onclick="makeAnnouncement()" style="position:fixed;bottom:20px;right:20px;z-index:999;padding:10px 20px;border:none;border-radius:8px;background:#ffc107;color:black;font-weight:bold;">
  📣 إعلان
  </button>
  <div id="online-counter" style="position:fixed;top:10px;left:10px;background:#007bff;color:white;padding:8px 14px;border-radius:12px;font-size:16px;z-index:999;">
  👥 المتصلين الآن: <span id="onlineCount">0</span>
  </div> id="mainRoom">
    <h2>🎤 الغرفة الصوتية</h2>
    <button onclick="changeBackground()">🖼️ تغيير الخلفية</button>
    <img src="gift-box.png" alt="gift" onclick="sendGift()" style="width:80px; cursor:pointer;" title="صندوق الهدايا">

    <p id="user-count">👥 عدد المستخدمين: 3</p>
    <button onclick="window.location.href='login.html'" style="position:absolute;top:20px;left:20px;padding:10px 15px;border:none;border-radius:8px;background:#dc3545;color:white;font-weight:bold;cursor:pointer;">🚪 خروج</button>
    <div id="mics">
      <div class="mic">
        <img src="../../../../default-avatar.png" alt="User Avatar" class="mic-avatar">
        <span class="mic-name">أحمد</span>
        <button class="mute-btn">Mute</button>
      </div>
      <div class="mic">
        <img src="../../../../default-avatar.png" alt="User Avatar" class="mic-avatar">
        <span class="mic-name">ليلى</span>
        <button class="mute-btn">Mute</button>
      </div>
      <div class="mic">
        <img src="../../../../default-avatar.png" alt="User Avatar" class="mic-avatar">
        <span class="mic-name">سارة</span>
        <button class="mute-btn">Mute</button>
      </div>
    </div>

    <div id="chat-box">
      <input type="text" id="msg" placeholder="اكتب رسالة...">
      <button onclick="sendMessage()">إرسال</button>
      <button onclick="sendGift()">🎁 إرسال هدية</button>
      <div id="messages"></div>
    </div>

    <!-- نافذة معلومات المستخدم -->
    <div id="user-info-popup" class="popup">
      <p id="user-name">👤 الاسم: </p>
      <p id="user-id">🆔 ID: </p>
      <button onclick="closePopup()">❌ إغلاق</button>
    </div>

    <audio id="mic-audio" src="mic-sound.mp3"></audio>

  <button onclick="toggleMusic()" style="position:absolute;top:20px;right:20px;padding:10px 15px;border:none;border-radius:8px;background:#28a745;color:white;font-weight:bold;cursor:pointer;">🎵 تشغيل/إيقاف الموسيقى</button>
  <audio id="bg-music" autoplay loop>

    <source src="bg-music.mp3" type="audio/mpeg">
  </audio>
  <div class="stats" id="statsBox">📊 إحصائيات:</div>
  <audio id="bgMusic" src="bg-music.mp3" loop autoplay></audio>

  <button onclick="toggleMicLock()" style="position:fixed;bottom:20px;right:20px;padding:10px 15px;background:#dc3545;color:white;border:none;border-radius:10px;z-index:1000;">
  🔒 قفل/فتح المايك
  </button>

  <div id="moderatorList" style="position:fixed;bottom:80px;right:20px;background:#fff;border:1px solid #ccc;padding:10px 15px;border-radius:10px;width:200px;max-height:200px;overflow:auto;"></div>

  <button onclick="assignModerator()" style="position:fixed;bottom:20px;left:20px;padding:10px 15px;background:#28a745;color:white;border:none;border-radius:10px;z-index:1000;">
  🛡️ تعيين مشرف
  </button>

  <button onclick="banUser()" style="position:fixed;bottom:80px;left:20px;padding:10px 15px;background:#dc3545;color:white;border:none;border-radius:10px;z-index:1000;">
  🚫 حظر مستخدم
  </button>

  <button onclick="reportUser()" style="position:fixed;bottom:140px;left:20px;padding:10px 15px;background:#ffc107;color:black;border:none;border-radius:10px;z-index:1000;">
  ⚠️ تبليغ عن مستخدم
  </button>

  <button onclick="toggleDarkMode()" style="position:fixed;top:20px;left:20px;padding:10px 15px;background:#343a40;color:white;border:none;border-radius:10px;z-index:1000;">
  🌙 تفعيل الوضع الليلي
  </button>

  <div style="position:fixed;top:80px;left:20px;background:#fff;padding:10px 15px;border-radius:10px;box-shadow:0 0 5px #aaa;">
    <strong>المستخدم:</strong> <span id="user-badge">جارٍ التحميل...</span>
  </div>


  <div id="userDisplay" style="position:fixed;top:160px;left:20px;background:#e0f7fa;padding:10px 15px;border-radius:10px;">
  <strong>👤 المستخدم:</strong> <span id="userBadgeName">جارٍ التحميل...</span>
  </div>
  <div id="topUsersList"
  style="position:fixed;top:100px;right:20px;background:#fff;border:1px solid #ccc;padding:10px 15px;border-radius:10px;width:220px;max-height:250px;overflow:auto;display:none;"></div>

  <button onclick="document.getElementById('topUsersList').style.display='block'; showTopUsers();" style="position:fixed;top:20px;right:20px;padding:10px 15px;background:#6f42c1;color:white;border:none;border-radius:10px;z-index:1000;">
  💫 عرض لوحة الشرف
  </button>



  <div id="honorBoard" style="position:fixed;top:10px;left:10px;padding:10px;background:#fff3cd;border-radius:12px;border:1px solid #ffeb3b;color:#000;font-size:14px;width:200px;">
    <strong>🏅 لوحة الشرف:</strong>
    <ul id="honorList" style="list-style:none;padding:5px 0;margin:0;">
      <li>1. -</li>
      <li>2. -</li>
      <li>3. -</li>
    </ul>
  </div>
  <div id="giftCounter"
  style="position:fixed;bottom:110px;right:20px;padding:10px 15px;background:#ffecb3;color:#000;border-radius:10px;">🎁 عدد الهدايا: 0</div>
  <button onclick="sendGift()" style="position:fixed;bottom:150px;right:20px;padding:10px 15px;background:#ff9800;color:white;border:none;border-radius:10px;cursor:pointer;">🎁 أرسل هدية</button>
  <div id="levelDisplay"
  style="position:fixed;bottom:70px;right:20px;padding:10px 15px;background:#ffc107;color:black;border-radius:10px;">المستوى: 1</div>
  <div id="xpCounter" style="position:fixed;bottom:20px;right:20px;padding:10px 15px;background:#007bff;color:white;border-radius:10px;">
  نقاطك: 0
  </div>

  <button onclick="simulateAction()" style="position:fixed;bottom:70px;right:20px;padding:10px 15px;background:#28a745;color:white;border:none;border-radius:10px;">
  🎯 تجربة الحصول على XP
  </button>

  <div id="topUsersPanel" style="position:fixed;top:60px;right:15px;width:220px;
  background:#fff;border:2px solid #2196f3;padding:10px;border-radius:10px;
  box-shadow:0 0 10px rgba(0,0,0,0.2);font-size:14px;z-index:9999">
    <div style="text-align:center;font-weight:bold;color:#2196f3;margin-bottom:5px">
      🏆 أفضل 5 مستخدمين
    </div>
    <ol id="topUsersList" style="padding-left:18px;margin:0;color:#333">
      <li>مستخدم 1 - 300 XP</li>
      <li>مستخدم 2 - 240 XP</li>
      <li>مستخدم 3 - 180 XP</li>
      <li>مستخدم 4 - 120 XP</li>
      <li>مستخدم 5 - 100 XP</li>
    </ol>
  </div>

  <!-- مثال لمستخدم في الغرفة -->
  <div style="position:fixed;bottom:60px;left:15px;background:#fff;padding:8px 16px;
  border-radius:8px;font-size:16px;color:#333;box-shadow:0 0 8px rgba(0,0,0,0.2)">
    👤 <span class="username">مستخدم 1</span>
  </div>

  <button onclick="showUserRank()" style="position:fixed;bottom:15px;right:15px;
  padding:10px 20px;background:#4caf50;color:white;border:none;border-radius:8px;
  font-size:16px;box-shadow:0 0 8px rgba(0,0,0,0.2);z-index:999">
  📊 معرفة ترتيبي
  </button>

  <div id="gift-animation" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
  font-size:40px; z-index:9999; background:#fff3cd; padding:20px; border-radius:12px; border:2px solid #ffc107;">
  🎁 تم إرسال هدية!
  </div>

  <div id="vote-bar">
    <span>هل توافق على طرد المستخدم؟</span>
    <button onclick="castVote('yes')">نعم</button>
    <button onclick="castVote('no')">لا</button>
  </div>

  <div id="achievements-box">🏆 لقد حصلت على إنجاز: أول دخول!</div>

  <button onclick="toggleDarkMode()" style="position:fixed;bottom:10px;left:10px;padding:6px 10px;border-radius:8px;">🌙 الوضع الليلي</button>

  <div style="position:fixed;bottom:0;right:0;z-index:999;background:#fff;padding:5px;border-radius:10px">
    <img src="https://via.placeholder.com/80x40" alt="غلاف" />
  </div>

  <button onclick="reportUser()" style="position:fixed;top:60px;right:10px;z-index:9999;padding:6px 10px;border-radius:8px;background:#dc3545;color:white;border:none">
  🚨 إبلاغ</button>
  </button>


  <div style="position:fixed;bottom:60px;left:10px;z-index:9999;background:#f1f1f1;padding:8px;border-radius:10px;border:1px solid #ccc">
    ✏️ اسمك:
    <input id="username-input" type="text" value="مستخدم" style="padding:4px 8px;border-radius:6px;border:1px solid #ccc;width:120px">
    <button onclick="changeUsername()" style="padding:4px 10px;background:#007bff;color:white;border:none;border-radius:6px">تحديث</button>
  </div>


  <button onclick="toggleDarkMode()" style="position:fixed;bottom:120px;left:10px;z-index:9999;padding:6px 12px;border-radius:10px;background:#333;color:white;border:none">
  🌙 الوضع الليلي
  </button>


  <div id="welcome-popup" style="position:fixed;top:30%;left:50%;transform:translateX(-50%);background:white;color:#333;padding:20px;border-radius:12px;box-shadow:0 0 10px rgba(0,0,0,0.2);z-index:10000;display:none;text-align:center">
    👋 مرحباً بك في <b>AirChat</b>! <br> استمتع بالدردشة 💬
    <br><br><button onclick="closeWelcomePopup()" style="padding:6px 12px;background:#007bff;color:white;border:none;border-radius:6px">حسناً</button>
  </div>

  <div style="text-align:center;margin-top:20px">
    <button onclick="copyRoomLink()" style="padding:10px 18px;background:#00b894;color:white;border:none;border-radius:8px;font-size:16px">
      🔗 مشاركة رابط الغرفة
    </button>
  </div>

  <div id="welcomeBanner" style="position:fixed;top:40px;left:50%;transform:translateX(-50%);background:#4CAF50;color:white;padding:10px 30px;border-radius:10px;font-size:18px;font-weight:bold;z-index:999;opacity:0;transition:opacity 1s;">
    🎉 مرحبًا بك في غرفة AirChat!
  </div>

  <audio id="welcomeAudio" src="welcome.mp3" autoplay></audio>

  <div id="toast">📩 وصلت رسالة جديدة!</div>

  <div id="userCount" style="position:fixed;top:10px;right:10px;background:#007bff;color:white;padding:5px 15px;border-radius:20px;font-weight:bold;font-size:14px;z-index:999;">
    👥 المتصلين: <span id="userCountNumber">1</span>
  </div>

  <button onclick="copyRoomLink()" style="position:fixed;bottom:20px;left:20px;background:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:10px;z-index:999;font-weight:bold;box-shadow:0 2px 6px rgba(0,0,0,0.2);">
    🔗 مشاركة الغرفة
  </button>

  <button onclick="exitRoom()" style="position:fixed;bottom:20px;right:20px;background:#dc3545;color:#fff;padding:10px 20px;border:none;border-radius:10px;z-index:999;font-weight:bold;box-shadow:0 2px 6px rgba(0,0,0,0.2);">
    🚪 خروج
  </button>

  <audio id="bg-music" src="bg-music.mp3" autoplay loop style="display:none;"></audio>

  <div id="welcome-msg" style="position:fixed;top:20px;right:20px;background:#007bff;color:#fff;padding:10px 20px;border-radius:10px;z-index:1000;box-shadow:0 2px 6px rgba(0,0,0,0.2);display:none;">
    👋 أهلاً بك في الغرفة!
  </div>

  <div id="status-bar" style="position:fixed;bottom:0;left:0;width:100%;background:#333;color:#fff;text-align:center;padding:8px;font-size:14px;z-index:999;">
    👥 عدد المستخدمين في الغرفة: <span id="user-count">10</span>
  </div>

  <div id="clock" style="position:fixed;top:10px;left:20px;background:#000;color:#fff;padding:6px 12px;border-radius:6px;font-family:monospace;font-size:14px;z-index:1000;">
    🕒 <span id="clock-time">00:00</span>
  </div>

  <div id="net-status" style="position:fixed;top:10px;right:10px;background:#28a745;color:white;padding:4px 10px;border-radius:6px;font-size:13px;z-index:1000;">
    ✅ متصل بالإنترنت
  </div>

  <div id="welcome-banner" style="position:fixed;top:50px;left:50%;transform:translateX(-50%);background:#ffc107;color:#000;padding:10px 20px;border-radius:8px;font-size:16px;font-weight:bold;z-index:1000;box-shadow:0 0 10px rgba(0,0,0,0.2);animation: fadeout 5s forwards;">
    👋 مرحبًا بك في غرفة AirChat!
  </div>

  <div id="user-counter" style="position:fixed;top:10px;left:10px;background:#007bff;color:white;padding:6px 12px;border-radius:6px;font-size:14px;z-index:1000;">
    👥 عدد المتصلين: <span id="user-count">1</span>
  </div>

  <button onclick="copyRoomLink()" style="position:fixed;bottom:10px;right:10px;padding:10px 15px;background:#28a745;color:#fff;border:none;border-radius:8px;font-size:14px;z-index:1000;box-shadow:0 0 8px rgba(0,0,0,0.2);">
    📤 مشاركة الغرفة
  </button>

  <div id="welcome-popup" style="display:none;position:fixed;top:50px;left:50%;transform:translateX(-50%);background:#fff;border:2px solid #28a745;padding:15px 20px;border-radius:12px;font-size:16px;color:#333;z-index:10000;box-shadow:0 0 10px rgba(0,0,0,0.2);">
    👋 مرحبًا بك في الغرفة يا بطل!
  </div>

  <audio id="msgSound" src="new-message.mp3" preload="auto"></audio>

  <div id="attendance-counter" style="position:fixed; top:10px; right:10px; background:#2196f3;
  color:white; padding:10px 16px; border-radius:8px; font-size:16px; z-index:999;">
    👥 عدد الحضور: <span id="count">23</span>
  </div>

  <div id="datetime-display" style="position:fixed; top:50px; right:10px; background:#333;
  color:white; padding:8px 14px; border-radius:8px; font-size:14px; z-index:999;">
    🕒 <span id="datetime"></span>
  </div>

  <button id="mute-button" style="position:fixed; bottom:20px; right:20px; background:#e53935;
  color:white; border:none; padding:12px 20px; border-radius:10px; font-size:16px; cursor:pointer; z-index:999;">
    🔇 كتم الصوت
  </button>

  <button id="share-button" style="position:fixed; bottom:70px; right:20px; background:#4caf50;
  color:white; border:none; padding:12px 20px; border-radius:10px; font-size:16px; cursor:pointer; z-index:999;">
    🔗 مشاركة الغرفة
  </button>

  <div id="user-count" style="position:fixed; top:10px; right:10px; background:#222; color:#fff;
  padding:8px 16px; border-radius:10px; font-size:14px; z-index:999;">
  👥 عدد المستخدمين: <span id="user-total">10</span>
  </div>


  <div id="live-clock" style="position:fixed; top:10px; left:10px; background:#000; color:#0f0;
  padding:8px 16px; border-radius:10px; font-size:14px; font-family:monospace; z-index:999;">
    🕒 <span id="clock-time">00:00:00</span>
  </div>

  <div id="room-name" style="position:fixed; top:55px; left:50%; transform:translateX(-50%);
  background:#007acc; color:white; padding:10px 20px; border-radius:12px; font-size:16px;
  box-shadow:0 2px 6px rgba(0,0,0,0.3); z-index:999;">
    🎤 أنت الآن في: <strong>غرفة رقم 1</strong>
  </div>

  <div style="position:fixed;bottom:70px;left:20px;right:20px;z-index:900;">
      <input id="msg-input" type="text" placeholder="اكتب رسالتك..."
        style="width:75%;padding:10px;border-radius:8px;border:1px solid #ccc;">
      <button onclick="sendMessage()"
        style="width:20%;padding:10px;border:none;border-radius:8px;
              background:#007bff;color:white;font-weight:bold;">إرسال</button>
    </div>

  <div style="position:fixed;left:0;bottom:0;padding:5px;background:#f8f8f8;border-top-right-radius:10px">
    👥 الزوار: أحمد، سارة، نجم
  </div>

  <div style="position:fixed;bottom:10px;left:10px;z-index:9999;background:#fff;padding:8px;border-radius:10px;border:1px solid #ccc">
    ⭐ تقييم الغرفة:
    <span id="stars">
      <span style="cursor:pointer">☆</span>
      <span style="cursor:pointer">☆</span>
      <span style="cursor:pointer">☆</span>
      <span style="cursor:pointer">☆</span>
      <span style="cursor:pointer">☆</span>
    </span>
  </div>

  <script src="chat.js"></script>
  <script src="bg.js"></script>
  <script src="gift.js"></script>
  <script src="user.js"></script>
  <script src="sound.js"></script>
  <script src="move.js"></script>
  <script src="music.js"></script>
  <script src="room.js"></script>
</body>
</html>
